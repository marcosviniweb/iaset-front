import{a as Z,c as ee,d as te,e as ne,f as ie}from"./chunk-YFFUOVOG.js";import{a as z,b as U,c as f,e as $,f as L,g as Y,h as G,i as H,j as J,k as B,l as K,m as Q,o as W}from"./chunk-6L2DAN5D.js";import"./chunk-4S5XMSU5.js";import"./chunk-DX4FTDQR.js";import{b as q,j as X}from"./chunk-X4VVONUQ.js";import{h as A,n as I}from"./chunk-6KEO6D2E.js";import{Db as b,Hb as h,Ib as u,Pb as j,Qb as o,Rb as S,Sb as R,Ta as c,U as N,V as D,W as E,Zb as P,cb as V,da as x,i as k,ib as s,ja as _,ka as C,qb as M,ub as p,xb as n,yb as e,zb as d}from"./chunk-X3WKPGPN.js";function ae(i,a){i&1&&(n(0,"span",15),o(1," * Campo Obrigat\xF3rio *"),e())}function le(i,a){i&1&&(n(0,"span",15),o(1," * Campo Obrigat\xF3rio *"),e())}function re(i,a){i&1&&(n(0,"span",15),o(1," * Campo Obrigat\xF3rio *"),e())}function de(i,a){if(i&1&&(d(0,"br"),n(1,"b"),o(2),e()),i&2){let t=u();c(2),S(t.warnMsg.msg)}}function ce(i,a){i&1&&(n(0,"span",15),o(1," * Campo Obrigat\xF3rio *"),e())}function pe(i,a){i&1&&(n(0,"label"),o(1,"Defici\xEAncia:"),e(),n(2,"div",11)(3,"div",33),d(4,"input",34),n(5,"label"),o(6,"Possui defici\xEAncia"),e()()())}function se(i,a){i&1&&(n(0,"h4"),o(1,"*Documentos necess\xE1rios*"),e())}function me(i,a){i&1&&(n(0,"ul")(1,"li"),o(2,"Certid\xE3o de casamento ou uni\xE3o:"),e()())}function ue(i,a){i&1&&(n(0,"li"),o(1,"Laudo m\xE9dico de defici\xEAncia:"),e())}function ge(i,a){if(i&1&&(n(0,"ul")(1,"li"),o(2,"Certid\xE3o de nascimento:"),e(),n(3,"li"),o(4,"Documento de ado\xE7\xE3o:"),e(),n(5,"li"),o(6,"Comprovante de matr\xEDcula ou faculdade:"),e(),s(7,ue,2,0,"li"),e()),i&2){let t,l=u();c(7),p((t=l.dependentForm.get("hasDisability"))!=null&&t.value?7:-1)}}function fe(i,a){if(i&1&&(n(0,"span"),o(1),e()),i&2){let t=u();c(),S(t.fileName)}}function _e(i,a){if(i&1&&(n(0,"span",30),o(1),e()),i&2){let t=u();M("ngClass",t.updateMessage.status),c(),R(" ",t.updateMessage.message," ")}}function Ce(i,a){if(i&1){let t=b();n(0,"button",35),h("click",function(){_(t);let r=u();return C(r.setDependent())}),o(1,"Cadastrar "),e()}if(i&2){let t=u();M("disabled",t.dependentForm.invalid)}}function he(i,a){if(i&1){let t=b();n(0,"button",35),h("click",function(){_(t);let r=u();return C(r.updateDependent())}),o(1,"Editar "),e()}if(i&2){let t=u();M("disabled",t.dependentForm.invalid)}}function xe(i,a){if(i&1){let t=b();n(0,"div")(1,"div",6),d(2,"img",36),e(),n(3,"h2",37),o(4," Cadastro efetuado com sucesso! "),e()(),n(5,"mat-dialog-content"),o(6," Aguarde a aprova\xE7\xE3o do seu cadastro. "),e(),n(7,"mat-dialog-actions")(8,"button",38),h("click",function(){_(t);let r=u();return C(r.closeDialog())}),o(9,"OK"),e()()}}function Me(i,a){i&1&&(n(0,"div")(1,"div",6),d(2,"img",36),e(),n(3,"h2",37),o(4," Deseja mudar suas informa\xE7\xF5es? "),e()(),n(5,"mat-dialog-actions")(6,"button",39),o(7,"Sim"),e(),n(8,"button",40),o(9,"Cancelar"),e()())}function be(i,a){i&1&&(n(0,"div")(1,"div",6),d(2,"img",36),e()(),n(3,"form",41)(4,"div",11)(5,"div",12)(6,"div",13),o(7,"Senha Atual:"),e(),d(8,"input",42),e()(),n(9,"div",11)(10,"div",12)(11,"div",13),o(12,"Nova Senha:"),e(),d(13,"input",43),e()(),n(14,"div",11)(15,"div",12)(16,"div",13),o(17,"Confirme a Senha:"),e(),d(18,"input",44),e()()(),n(19,"mat-dialog-actions",45)(20,"button",39),o(21,"Alterar"),e(),n(22,"button",40),o(23,"Cancelar"),e()())}var oe=class i{fb=x(Q);dataService=x(X);dialog=x(Z);activatedRoute=x(q);userData=JSON.parse(localStorage.getItem("userData"));updateMessage={status:"",message:""};dependentForm=this.fb.group({name:["",[f.required,f.minLength(3)]],cpf:["",[f.required,f.minLength(11)]],birthDate:["",[f.required]],relationship:["",[f.required]],file:new Y(null),hasDisability:[!1]});destroy$=new k;fileName="";warnMsg={status:!1,msg:"J\xE1 cadastrado(a)"};submitType="set";depId;ngOnInit(){this.getDependents().pipe(D(this.destroy$),E(a=>this.verifySpouse(a)),N(a=>this.setDependentFromParam(a))).subscribe()}setDependentFromParam(a){return this.activatedRoute.params.pipe(D(this.destroy$),E(t=>{let l=t.id;if(l){this.depId=l;let r=a.find(m=>m.id==l);r&&(this.dependentForm.patchValue(r),this.dependentForm.controls.birthDate.setValue(this.formatarData(r.birthDate)),this.submitType="edit")}}))}getDependents(){return this.dataService.getDependents(this.userData.id)}verifySpouse(a){a.find(t=>t.relationship.includes("conjuge"))&&(this.dependentForm.controls.relationship.setValue("filho"),this.dependentForm.controls.relationship.disable(),this.warnMsg.status=!0)}onFileSelected(a){let t=a.target;if(t.files&&t.files.length>0){let l=t.files[0];this.fileName=l.name,this.dependentForm.get("file")?.setValue(l)}}formatarData(a){if(!a)return"";let t=new Date(a),l=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),m=String(t.getUTCDate()).padStart(2,"0");return`${l}-${r}-${m}`}closeDialog(){this.dialog.closeAll()}setDependent(){let a=new FormData;Object.keys(this.dependentForm.controls).forEach(t=>{t!=="hasDisability"&&a.append(t,this.dependentForm.get(t)?.value)}),this.dataService.setDependent(this.userData.id,a).subscribe({next:t=>{this.updateMessage={status:"sucess",message:"Dependente cadastrado com sucesso !"}},error:t=>{throw this.updateMessage={status:"error",message:"Erro ao cadastrar o dependente - Cod:"+t.status},t}})}updateDependent(){let a=new FormData;Object.keys(this.dependentForm.controls).forEach(t=>{t!=="hasDisability"&&a.append(t,this.dependentForm.get(t)?.value)}),this.dataService.updateDependent(this.userData.id,this.depId,a).subscribe({next:t=>{console.log(t),this.updateMessage={status:"sucess",message:"Dependente alterado com sucesso !"}},error:t=>{throw this.updateMessage={status:"error",message:"Erro ao cadastrar o dependente - Cod:"+t.status},t}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=V({type:i,selectors:[["app-dependente"]],decls:79,vars:12,consts:[["file",""],["templete",""],["templeteMsg",""],["templeteConfirm",""],["templatePass",""],[1,"ui","horizontal","divider"],[1,"header"],[1,"id","card","outline","icon"],[1,"ui","inverted","divider"],[1,"ui","form",3,"formGroup"],[1,"two","fields"],[1,"field"],[1,"ui","labeled","input"],[1,"ui","label"],["type","text","formControlName","name","placeholder","Nome"],[1,"error-msg"],["type","text","formControlName","cpf","placeholder","CPF","CpfCnpjMask","","maxlength","14"],[1,"eight","wide","field"],["type","date","placeholder","DD/MM/YYYY","formControlName","birthDate"],[1,"content"],[1,"ui","form"],[1,"grouped","fields"],[1,"ui","radio","checkbox"],["type","radio","name","relationship","value","conjuge","formControlName","relationship"],["type","radio","name","relationship","value","filho","formControlName","relationship"],[1,"ui","labeled","input","file"],[1,"container-file"],[1,"container-content"],["type","file",3,"change"],[1,"ui","button","primary",3,"click"],[1,"update-message",3,"ngClass"],[1,"container-button"],["type","submit",1,"ui","button",3,"disabled"],[1,"ui","checkbox"],["type","checkbox","formControlName","hasDisability"],["type","submit",1,"ui","button",3,"click","disabled"],["src","img/white-logo.png","alt",""],[1,"dialog-title"],["type","button",1,"ui","button","primary",3,"click"],["type","button",1,"ui","button","primary"],["type","button",1,"ui","button"],[1,"ui","form","dialog-form"],["type","password","placeholder","Sua senha atual"],["type","password","placeholder","Nova senha"],["type","password","placeholder","Digite novamente..."],[1,""]],template:function(t,l){if(t&1){let r=b();n(0,"section")(1,"div",5)(2,"div",6),d(3,"i",7),n(4,"h2"),o(5,"Cadastro de Dependente"),e()()(),d(6,"div",8),n(7,"form",9),d(8,"div",8),n(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13),o(13,"Nome:"),e(),d(14,"input",14),e(),s(15,ae,2,0,"span",15),e(),n(16,"div",11)(17,"div",12)(18,"div",13),o(19,"CPF:"),e(),d(20,"input",16),e(),s(21,le,2,0,"span",15),e()(),n(22,"div",10)(23,"div",17)(24,"div",12)(25,"div",13),o(26,"Data de Nascimento:"),e(),d(27,"input",18),e(),s(28,re,2,0,"span",15),e()(),n(29,"div",10)(30,"div",11)(31,"label"),o(32,"Documentos de certifica\xE7\xE3o:"),e(),n(33,"div",19)(34,"div",20)(35,"div",21)(36,"label"),o(37,"Rela\xE7\xE3o:"),e(),n(38,"div",11)(39,"div",22),d(40,"input",23),n(41,"label"),o(42,"C\xF4njuge "),s(43,de,3,1),e()()(),n(44,"div",11)(45,"div",22),d(46,"input",24),n(47,"label"),o(48,"Filho"),e()()()(),s(49,ce,2,0,"span",15),e(),n(50,"div",20)(51,"div",21),s(52,pe,7,0),e()()()(),n(53,"div",11)(54,"div",25)(55,"div",26)(56,"label"),o(57,"* Documento de certifica\xE7\xE3o *"),e()(),n(58,"div",27),d(59,"p"),n(60,"input",28,0),h("change",function(g){return _(r),C(l.onFileSelected(g))}),e(),s(62,se,2,0,"h4")(63,me,3,0,"ul")(64,ge,8,1,"ul")(65,fe,2,1,"span"),n(66,"button",29),h("click",function(){_(r);let g=j(61);return C(g.click())}),o(67,"Selecione o Documento"),e()()()()(),s(68,_e,2,2,"span",30),n(69,"div",31,1),s(71,Ce,2,1,"button",32)(72,he,2,1,"button",32),e()()(),s(73,xe,10,0,"ng-template",null,2,P)(75,Me,10,0,"ng-template",null,3,P)(77,be,24,0,"ng-template",null,4,P)}if(t&2){let r,m,g,y,O,w,F,v,T;c(7),M("formGroup",l.dependentForm),c(8),p((r=l.dependentForm.get("name"))!=null&&r.hasError("required")&&((r=l.dependentForm.get("name"))!=null&&r.touched)?15:-1),c(6),p((m=l.dependentForm.get("cpf"))!=null&&m.hasError("required")&&((m=l.dependentForm.get("cpf"))!=null&&m.touched)?21:-1),c(7),p((g=l.dependentForm.get("birthDate"))!=null&&g.hasError("required")&&((g=l.dependentForm.get("birthDate"))!=null&&g.touched)?28:-1),c(15),p(l.warnMsg.status&&((y=l.dependentForm.get("relationship"))==null?null:y.value)=="filho"?43:-1),c(6),p((O=l.dependentForm.get("relationship"))!=null&&O.hasError("required")&&((O=l.dependentForm.get("relationship"))!=null&&O.touched)?49:-1),c(3),p(((w=l.dependentForm.get("relationship"))==null?null:w.value)==="filho"?52:-1),c(10),p((F=l.dependentForm.get("relationship"))!=null&&F.value?62:-1),c(),p(((v=l.dependentForm.get("relationship"))==null?null:v.value)=="conjuge"?63:((v=l.dependentForm.get("relationship"))==null?null:v.value)=="filho"?64:-1),c(2),p((T=l.dependentForm.get("file"))!=null&&T.value?65:-1),c(3),p(l.updateMessage?68:-1),c(3),p(l.submitType==="set"?71:72)}},dependencies:[ne,te,ee,ie,W,G,U,z,H,$,L,K,J,B,I,A],styles:["[_nghost-%COMP%]{width:100%;height:100%}.header[_ngcontent-%COMP%]{padding:20px;width:100%;display:flex;justify-content:center;background:linear-gradient(to right,#008cb7d7,#0046b7d7)}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.dialog-title[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:16px}mat-dialog-content[_ngcontent-%COMP%]{text-align:center}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;margin-bottom:10px}.dialog-form[_ngcontent-%COMP%]{padding:10px!important}.dialog-form[_ngcontent-%COMP%]   .ui[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#fff!important;background:#0045b7!important}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:355px;height:100%;background:linear-gradient(to bottom,#008cb7d7,#97bad6d7);border-radius:10px;box-shadow:1px 2px 3px #2c2c2c73;overflow:hidden}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-top:10px;padding:10px;width:max-content;height:min-content;display:flex;justify-content:center;align-items:center;background:#e6e6e6a6;box-shadow:0 0 2px gray;border-radius:10px}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:center;font-size:50px;color:#0045b7}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:before{height:100%;display:flex;align-items:center}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]{padding:10px;width:100%;height:100%;max-width:800px}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:15px;justify-content:center}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:160px;background:#0045b7;padding:5px;text-align:center;border-radius:10px 10px 0 0;font-weight:600}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:190px;width:160px;object-fit:cover;object-position:center;box-shadow:1px 2px 3px #47474760}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   .select-picture[_ngcontent-%COMP%]{display:none;height:100%;width:100%;background:#6363635e;flex-direction:column;align-items:center;justify-content:center;position:absolute;color:#fff;cursor:pointer}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   .select-picture[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   .select-picture[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-photo[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]:hover   .select-picture[_ngcontent-%COMP%]{display:flex}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]{width:100%}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]   .ui[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{background:#0046b7d7;color:#fff;min-width:25%}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-button[_ngcontent-%COMP%]{margin-top:50px;display:flex;width:100%;justify-content:center}section[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]   .container-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#0045b7;color:#fff;margin-right:20px;width:200px}.update-message[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;font-weight:500;font-style:italic}.sucess[_ngcontent-%COMP%]{color:green}.error[_ngcontent-%COMP%]{color:red}.error-msg[_ngcontent-%COMP%]{display:flex;width:100%;color:red;margin-top:5px;margin-left:10px;font-size:12px}.container-file[_ngcontent-%COMP%]{display:flex;justify-content:center;background:#0045b7;color:#fff;font-weight:700;width:100%;padding:10px;border-radius:10px 10px 0 0}.container-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:#dfdfdfd0;height:max-content;padding:20px;width:100%;border-radius:0 0 10px 10px}.container-content[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{height:fit-content!important;margin-top:10px;width:fit-content}.container-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#fff}.container-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.container-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.file[_ngcontent-%COMP%]{display:flex;flex-direction:column}.input-file[_ngcontent-%COMP%]{display:none}.content[_ngcontent-%COMP%]{display:flex}.segment[_ngcontent-%COMP%]{background:transparent!important;align-items:center!important}.segment[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}"]})};export{oe as DependenteComponent};
